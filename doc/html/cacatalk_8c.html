<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>CACAtalk: src/cacatalk.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">CACAtalk
   &#160;<span id="projectnumber">1.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">src/cacatalk.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;sys/ioctl.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;sys/time.h&gt;</code><br/>
<code>#include &lt;sys/mman.h&gt;</code><br/>
<code>#include &lt;sys/select.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="cacatalk_8h_source.html">cacatalk.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="common__image_8h_source.html">common_image.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="caca__socket_8h_source.html">caca_socket.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for cacatalk.c:</div>
<div class="dyncontent">
<div class="center"><img src="cacatalk_8c__incl.png" border="0" usemap="#src_2cacatalk_8c" alt=""/></div>
<map name="src_2cacatalk_8c" id="src_2cacatalk_8c">
</map>
</div>
</div>
<p><a href="cacatalk_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#ab0867c19bcdc2d3ad6c0896ffea47c9d">display_menu</a> (caca_canvas_t *cv, <a class="el" href="cacatalk_8h.html#a53ebf62c20f5ec338ba8eda81a032f5b">options</a> *arg_opts)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">It draws the main menu indicating posible options tied to keyboard commands.  <a href="#ab0867c19bcdc2d3ad6c0896ffea47c9d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#afb3b236599a47f68e858b33e30efc8a7">chat</a> (caca_canvas_t *cv, caca_display_t *dp, int text_fd, int vid_fd, <a class="el" href="cacatalk_8h.html#abe08d2c8dcdb909042427bfe5d771110">Window</a> *win, char *peer_hostname)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the main chatroom environment where text data is sent/received via a single text socket, and video is received using another socket.  <a href="#afb3b236599a47f68e858b33e30efc8a7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#af94b7f7637d9f1d5d6338bdb13cdbfbb">set_video</a> (<a class="el" href="cacatalk_8h.html#ae3d11b6af4cc159b10400210dcefa284">video_params</a> *vid_params, char *dev_name, <a class="el" href="cacatalk_8h.html#abe08d2c8dcdb909042427bfe5d771110">Window</a> *win, int img_width, int img_height)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the video device using the V4L2 driver.  <a href="#af94b7f7637d9f1d5d6338bdb13cdbfbb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#aa9c547c41b5d5fee785dcbb42d9685de">set_peer_address</a> (caca_canvas_t *cv, caca_display_t *dp, <a class="el" href="cacatalk_8h.html#a53ebf62c20f5ec338ba8eda81a032f5b">options</a> *opts)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets an IP address or hostname to the peer to establish connection with.  <a href="#aa9c547c41b5d5fee785dcbb42d9685de"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#a14b37c9f12a52944998c3e88a64a574c">change_video_device</a> (caca_canvas_t *cv, caca_display_t *dp, <a class="el" href="cacatalk_8h.html#a53ebf62c20f5ec338ba8eda81a032f5b">options</a> *opts, <a class="el" href="cacatalk_8h.html#ae3d11b6af4cc159b10400210dcefa284">video_params</a> *vid_params, <a class="el" href="cacatalk_8h.html#abe08d2c8dcdb909042427bfe5d771110">Window</a> *win, int img_width, int img_height)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Changes or sets the video device to be used with cacatalk.  <a href="#a14b37c9f12a52944998c3e88a64a574c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#a3600698b52c926004b0546164aef62ca">turn_video_stream_on</a> (<a class="el" href="cacatalk_8h.html#ae3d11b6af4cc159b10400210dcefa284">video_params</a> *vid_params)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to turn the video stream on and sets the related indicated flag in the passed structure.  <a href="#a3600698b52c926004b0546164aef62ca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#ad62dc32c9a10f83df0e82acc91047cf4">turn_video_stream_off</a> (<a class="el" href="cacatalk_8h.html#ae3d11b6af4cc159b10400210dcefa284">video_params</a> *vid_params)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to turn the video stream off and sets the related indicated flag in the passed structure.  <a href="#ad62dc32c9a10f83df0e82acc91047cf4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#a70a5caba7bafd8729a9fcf5c3d35f802">close_video_stream</a> (<a class="el" href="cacatalk_8h.html#ae3d11b6af4cc159b10400210dcefa284">video_params</a> *vid_params)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop streaming video and close V4L video device.  <a href="#a70a5caba7bafd8729a9fcf5c3d35f802"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#a22cce36344ad43e1d0742f8af3ba7296">xioctl</a> (int fd, int request, void *arg)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">It persistently calls the v4l2_ioctl() function to program the V4L2 device.  <a href="#a22cce36344ad43e1d0742f8af3ba7296"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#af0452d042b6a50caa5d9b6b68fbae643">set_window</a> (int fd, unsigned short video_lines, <a class="el" href="cacatalk_8h.html#abe08d2c8dcdb909042427bfe5d771110">Window</a> *win, caca_canvas_t *cv)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Fills structure with current window dimensions.  <a href="#af0452d042b6a50caa5d9b6b68fbae643"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#a2a6fc9780a5006f0e7f7a3cac5b852dd">get_options</a> (int argc, char **argv, <a class="el" href="cacatalk_8h.html#a53ebf62c20f5ec338ba8eda81a032f5b">options</a> *opt)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses command-line options and corresponding arguments using the getopt() function found in the unistd library.  <a href="#a2a6fc9780a5006f0e7f7a3cac5b852dd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#a8892179bee3356c0c6399983fa614ba5">send_video_thread</a> (void *arguments)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This thread grabs video frames from the local host video device and send it in the caca format to the connected peer.  <a href="#a8892179bee3356c0c6399983fa614ba5"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cacatalk_8h.html#a47c4f91cf69c2bec7dba691fc55f5565">video_out_args</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cacatalk_8c.html#a58a896d0c5a5714ee4364a0e183f68fe">g_video_out</a></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a14b37c9f12a52944998c3e88a64a574c"></a><!-- doxytag: member="cacatalk.c::change_video_device" ref="a14b37c9f12a52944998c3e88a64a574c" args="(caca_canvas_t *cv, caca_display_t *dp, options *opts, video_params *vid_params, Window *win, int img_width, int img_height)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="cacatalk_8h.html#a14b37c9f12a52944998c3e88a64a574c">change_video_device</a> </td>
          <td>(</td>
          <td class="paramtype">caca_canvas_t *&#160;</td>
          <td class="paramname"><em>cv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">caca_display_t *&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cacatalk_8h.html#a53ebf62c20f5ec338ba8eda81a032f5b">options</a> *&#160;</td>
          <td class="paramname"><em>opts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cacatalk_8h.html#ae3d11b6af4cc159b10400210dcefa284">video_params</a> *&#160;</td>
          <td class="paramname"><em>vid_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cacatalk_8h.html#abe08d2c8dcdb909042427bfe5d771110">Window</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>img_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>img_height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Changes or sets the video device to be used with cacatalk. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cv</td><td>A pointer to the caca canvas </td></tr>
    <tr><td class="paramname">dp</td><td>A pointer to the caca display </td></tr>
    <tr><td class="paramname">opts</td><td>The current argument options structure into which the new hostname or IP address will be saved </td></tr>
    <tr><td class="paramname">vid_params</td><td>A pointer to the parameters structure for the video device to which the request will be made to. </td></tr>
    <tr><td class="paramname">win</td><td>A pointer to the window parameters structure to be passed as setting video </td></tr>
    <tr><td class="paramname">img_width</td><td>The video frame width in pixels </td></tr>
    <tr><td class="paramname">img_height</td><td>The video frame heigh in pixels </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l01036">1036</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

<p>References <a class="el" href="cacatalk_8h_source.html#l00071">textentry::buffer</a>, <a class="el" href="cacatalk_8h_source.html#l00062">BUFFER_SIZE</a>, <a class="el" href="cacatalk_8h_source.html#l00074">textentry::changed</a>, <a class="el" href="cacatalk_8h_source.html#l00073">textentry::cursor</a>, <a class="el" href="cacatalk_8h_source.html#l00112">video_params_s::is_ok</a>, <a class="el" href="cacatalk_8c_source.html#l00791">set_video()</a>, <a class="el" href="cacatalk_8h_source.html#l00072">textentry::size</a>, and <a class="el" href="cacatalk_8h_source.html#l00100">options_s::video_device_name</a>.</p>

<p>Referenced by <a class="el" href="cacatalk_8c_source.html#l00028">main()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cacatalk_8c_a14b37c9f12a52944998c3e88a64a574c_cgraph.png" border="0" usemap="#cacatalk_8c_a14b37c9f12a52944998c3e88a64a574c_cgraph" alt=""/></div>
<map name="cacatalk_8c_a14b37c9f12a52944998c3e88a64a574c_cgraph" id="cacatalk_8c_a14b37c9f12a52944998c3e88a64a574c_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afb3b236599a47f68e858b33e30efc8a7"></a><!-- doxytag: member="cacatalk.c::chat" ref="afb3b236599a47f68e858b33e30efc8a7" args="(caca_canvas_t *cv, caca_display_t *dp, int text_fd, int vid_fd, Window *win, char *peer_hostname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="cacatalk_8h.html#afb3b236599a47f68e858b33e30efc8a7">chat</a> </td>
          <td>(</td>
          <td class="paramtype">caca_canvas_t *&#160;</td>
          <td class="paramname"><em>cv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">caca_display_t *&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>text_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vid_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cacatalk_8h.html#abe08d2c8dcdb909042427bfe5d771110">Window</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>peer_hostname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is the main chatroom environment where text data is sent/received via a single text socket, and video is received using another socket. </p>
<p>Options, such as turning the video stream on/off can be toggled by pressing "Ctr+V" Every time the user enters a line of text, it will be sent to the peer. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cv</td><td>A pointer to the caca canvas </td></tr>
    <tr><td class="paramname">dp</td><td>A pointer to the caca display </td></tr>
    <tr><td class="paramname">text_fd</td><td>The socket file descriptor for sending/receiving text data </td></tr>
    <tr><td class="paramname">vid_fd</td><td>The socket file descriptor for receiving video data </td></tr>
    <tr><td class="paramname">win</td><td>A pointer to our custom Window element to which information will be assigned </td></tr>
    <tr><td class="paramname">peer_hostname</td><td>The realized username of the peer user (However, username is not resolved yet in this version)</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if nothing went wrong. This function always return (unless something crashed) </dd></dl>

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l00419">419</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

<p>References <a class="el" href="cacatalk_8h_source.html#l00071">textentry::buffer</a>, <a class="el" href="cacatalk_8h_source.html#l00062">BUFFER_SIZE</a>, <a class="el" href="cacatalk_8h_source.html#l00091">_window::caca_format</a>, <a class="el" href="cacatalk_8h_source.html#l00074">textentry::changed</a>, <a class="el" href="cacatalk_8h_source.html#l00073">textentry::cursor</a>, <a class="el" href="cacatalk_8h_source.html#l00112">video_params_s::is_ok</a>, <a class="el" href="cacatalk_8h_source.html#l00113">video_params_s::is_on</a>, <a class="el" href="caca__socket_8h_source.html#l00037">MAXFD</a>, <a class="el" href="caca__socket_8h_source.html#l00035">MAXLINE</a>, <a class="el" href="cacatalk_8h_source.html#l00072">textentry::size</a>, <a class="el" href="cacatalk_8h_source.html#l00063">TEXT_ENTRIES</a>, <a class="el" href="cacatalk_8c_source.html#l01221">turn_video_stream_off()</a>, <a class="el" href="cacatalk_8c_source.html#l01207">turn_video_stream_on()</a>, <a class="el" href="cacatalk_8h_source.html#l00142">video_out_args_s::vid_params</a>, <a class="el" href="cacatalk_8h_source.html#l00090">_window::video_cols</a>, and <a class="el" href="cacatalk_8h_source.html#l00089">_window::video_lines</a>.</p>

<p>Referenced by <a class="el" href="cacatalk_8c_source.html#l00028">main()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cacatalk_8c_afb3b236599a47f68e858b33e30efc8a7_cgraph.png" border="0" usemap="#cacatalk_8c_afb3b236599a47f68e858b33e30efc8a7_cgraph" alt=""/></div>
<map name="cacatalk_8c_afb3b236599a47f68e858b33e30efc8a7_cgraph" id="cacatalk_8c_afb3b236599a47f68e858b33e30efc8a7_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a70a5caba7bafd8729a9fcf5c3d35f802"></a><!-- doxytag: member="cacatalk.c::close_video_stream" ref="a70a5caba7bafd8729a9fcf5c3d35f802" args="(video_params *vid_params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="cacatalk_8h.html#a70a5caba7bafd8729a9fcf5c3d35f802">close_video_stream</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cacatalk_8h.html#ae3d11b6af4cc159b10400210dcefa284">video_params</a> *&#160;</td>
          <td class="paramname"><em>vid_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop streaming video and close V4L video device. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>pointer to the parameters structure of the video device </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l01235">1235</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

<p>References <a class="el" href="cacatalk_8h_source.html#l00122">video_params_s::buffers</a>, <a class="el" href="common__image_8h_source.html#l00026">buffer::length</a>, <a class="el" href="cacatalk_8h_source.html#l00121">video_params_s::number_of_buffers</a>, <a class="el" href="common__image_8h_source.html#l00025">buffer::start</a>, <a class="el" href="cacatalk_8c_source.html#l01221">turn_video_stream_off()</a>, and <a class="el" href="cacatalk_8h_source.html#l00117">video_params_s::v4l_fd</a>.</p>

<p>Referenced by <a class="el" href="cacatalk_8c_source.html#l00028">main()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cacatalk_8c_a70a5caba7bafd8729a9fcf5c3d35f802_cgraph.png" border="0" usemap="#cacatalk_8c_a70a5caba7bafd8729a9fcf5c3d35f802_cgraph" alt=""/></div>
<map name="cacatalk_8c_a70a5caba7bafd8729a9fcf5c3d35f802_cgraph" id="cacatalk_8c_a70a5caba7bafd8729a9fcf5c3d35f802_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab0867c19bcdc2d3ad6c0896ffea47c9d"></a><!-- doxytag: member="cacatalk.c::display_menu" ref="ab0867c19bcdc2d3ad6c0896ffea47c9d" args="(caca_canvas_t *cv, options *arg_opts)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="cacatalk_8h.html#ab0867c19bcdc2d3ad6c0896ffea47c9d">display_menu</a> </td>
          <td>(</td>
          <td class="paramtype">caca_canvas_t *&#160;</td>
          <td class="paramname"><em>cv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cacatalk_8h.html#a53ebf62c20f5ec338ba8eda81a032f5b">options</a> *&#160;</td>
          <td class="paramname"><em>arg_opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>It draws the main menu indicating posible options tied to keyboard commands. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cv</td><td>A pointer to the caca canvas </td></tr>
    <tr><td class="paramname">arg_opts</td><td>The current argument options structure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l00365">365</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

<p>References <a class="el" href="cacatalk_8h_source.html#l00102">options_s::host_IPv4</a>, <a class="el" href="cacatalk_8h_source.html#l00112">video_params_s::is_ok</a>, <a class="el" href="cacatalk_8h_source.html#l00101">options_s::peer_name</a>, <a class="el" href="cacatalk_8h_source.html#l00139">video_out_args_s::socketfd</a>, <a class="el" href="cacatalk_8h_source.html#l00142">video_out_args_s::vid_params</a>, and <a class="el" href="cacatalk_8h_source.html#l00100">options_s::video_device_name</a>.</p>

<p>Referenced by <a class="el" href="cacatalk_8c_source.html#l00028">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a6fc9780a5006f0e7f7a3cac5b852dd"></a><!-- doxytag: member="cacatalk.c::get_options" ref="a2a6fc9780a5006f0e7f7a3cac5b852dd" args="(int argc, char **argv, options *opt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="cacatalk_8h.html#a2a6fc9780a5006f0e7f7a3cac5b852dd">get_options</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cacatalk_8h.html#a53ebf62c20f5ec338ba8eda81a032f5b">options</a> *&#160;</td>
          <td class="paramname"><em>opt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Parses command-line options and corresponding arguments using the getopt() function found in the unistd library. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>The command line argument count </td></tr>
    <tr><td class="paramname">argv</td><td>The command line arguments list </td></tr>
    <tr><td class="paramname">opt</td><td>A pointer to the options structure pertaining to corresponding argument values</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if successfully parsed all options </td></tr>
    <tr><td class="paramname">-1</td><td>if there was an error parsing options </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l01290">1290</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

<p>References <a class="el" href="cacatalk_8h_source.html#l00104">options_s::driver_choice</a>, <a class="el" href="cacatalk_8h_source.html#l00103">options_s::driver_options</a>, <a class="el" href="caca__socket_8c_source.html#l00019">get_IP_addresses()</a>, <a class="el" href="cacatalk_8h_source.html#l00102">options_s::host_IPv4</a>, <a class="el" href="cacatalk_8h_source.html#l00101">options_s::peer_name</a>, and <a class="el" href="cacatalk_8h_source.html#l00100">options_s::video_device_name</a>.</p>

<p>Referenced by <a class="el" href="cacatalk_8c_source.html#l00028">main()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cacatalk_8c_a2a6fc9780a5006f0e7f7a3cac5b852dd_cgraph.png" border="0" usemap="#cacatalk_8c_a2a6fc9780a5006f0e7f7a3cac5b852dd_cgraph" alt=""/></div>
<map name="cacatalk_8c_a2a6fc9780a5006f0e7f7a3cac5b852dd_cgraph" id="cacatalk_8c_a2a6fc9780a5006f0e7f7a3cac5b852dd_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3c04138a5bfe5d72780bb7e82a18e627"></a><!-- doxytag: member="cacatalk.c::main" ref="a3c04138a5bfe5d72780bb7e82a18e627" args="(int argc, char **argv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="cacatalk_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l00028">28</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

<p>References <a class="el" href="cacatalk_8c_source.html#l01036">change_video_device()</a>, <a class="el" href="cacatalk_8c_source.html#l00419">chat()</a>, <a class="el" href="cacatalk_8c_source.html#l01235">close_video_stream()</a>, <a class="el" href="caca__socket_8c_source.html#l00057">connect_to_peer_socket()</a>, <a class="el" href="cacatalk_8c_source.html#l00365">display_menu()</a>, <a class="el" href="cacatalk_8h_source.html#l00104">options_s::driver_choice</a>, <a class="el" href="cacatalk_8h_source.html#l00103">options_s::driver_options</a>, <a class="el" href="caca__socket_8h_source.html#l00034">ERROR_EXIT</a>, <a class="el" href="cacatalk_8c_source.html#l01290">get_options()</a>, <a class="el" href="caca__socket_8h_source.html#l00036">LISTEN_QUEUE_SIZE</a>, <a class="el" href="cacatalk_8h_source.html#l00064">NUM_THREADS</a>, <a class="el" href="cacatalk_8h_source.html#l00101">options_s::peer_name</a>, <a class="el" href="caca__socket_8h_source.html#l00032">PORT_CHAT</a>, <a class="el" href="caca__socket_8h_source.html#l00033">PORT_VIDEO</a>, <a class="el" href="cacatalk_8h_source.html#l00140">video_out_args_s::quit</a>, <a class="el" href="cacatalk_8c_source.html#l01354">send_video_thread()</a>, <a class="el" href="caca__socket_8c_source.html#l00151">set_non_block()</a>, <a class="el" href="cacatalk_8c_source.html#l00894">set_peer_address()</a>, <a class="el" href="cacatalk_8c_source.html#l00791">set_video()</a>, <a class="el" href="cacatalk_8c_source.html#l01268">set_window()</a>, <a class="el" href="caca__socket_8h_source.html#l00029">SOCKADDR</a>, <a class="el" href="cacatalk_8h_source.html#l00139">video_out_args_s::socketfd</a>, <a class="el" href="cacatalk_8c_source.html#l01221">turn_video_stream_off()</a>, <a class="el" href="cacatalk_8h_source.html#l00142">video_out_args_s::vid_params</a>, <a class="el" href="cacatalk_8h_source.html#l00100">options_s::video_device_name</a>, and <a class="el" href="cacatalk_8h_source.html#l00141">video_out_args_s::win</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cacatalk_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph.png" border="0" usemap="#cacatalk_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph" alt=""/></div>
<map name="cacatalk_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph" id="cacatalk_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8892179bee3356c0c6399983fa614ba5"></a><!-- doxytag: member="cacatalk.c::send_video_thread" ref="a8892179bee3356c0c6399983fa614ba5" args="(void *arguments)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="cacatalk_8h.html#a8892179bee3356c0c6399983fa614ba5">send_video_thread</a> </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arguments</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This thread grabs video frames from the local host video device and send it in the caca format to the connected peer. </p>

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l01354">1354</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

<p>References <a class="el" href="cacatalk_8h_source.html#l00119">video_params_s::buf</a>, <a class="el" href="cacatalk_8h_source.html#l00122">video_params_s::buffers</a>, <a class="el" href="cacatalk_8h_source.html#l00128">video_params_s::caca_brightness</a>, <a class="el" href="cacatalk_8h_source.html#l00129">video_params_s::caca_contrast</a>, <a class="el" href="cacatalk_8h_source.html#l00126">video_params_s::caca_dither</a>, <a class="el" href="cacatalk_8h_source.html#l00125">video_params_s::caca_format</a>, <a class="el" href="cacatalk_8h_source.html#l00127">video_params_s::caca_gamma</a>, <a class="el" href="cacatalk_8h_source.html#l00061">CLEAR</a>, <a class="el" href="cacatalk_8h_source.html#l00088">_window::cols</a>, <a class="el" href="cacatalk_8h_source.html#l00132">video_params_s::cv_cols</a>, <a class="el" href="cacatalk_8h_source.html#l00131">video_params_s::cv_rows</a>, <a class="el" href="common__image_8h_source.html#l00037">image::dither</a>, <a class="el" href="cacatalk_8h_source.html#l00118">video_params_s::fmt</a>, <a class="el" href="cacatalk_8h_source.html#l00112">video_params_s::is_ok</a>, <a class="el" href="cacatalk_8h_source.html#l00113">video_params_s::is_on</a>, <a class="el" href="common__image_8c_source.html#l00020">load_image_from_V4L_buffer()</a>, <a class="el" href="caca__socket_8h_source.html#l00037">MAXFD</a>, <a class="el" href="cacatalk_8h_source.html#l00124">video_params_s::memory</a>, <a class="el" href="common__image_8h_source.html#l00035">image::pixels</a>, <a class="el" href="cacatalk_8h_source.html#l00140">video_out_args_s::quit</a>, <a class="el" href="cacatalk_8h_source.html#l00087">_window::rows</a>, <a class="el" href="cacatalk_8h_source.html#l00139">video_out_args_s::socketfd</a>, <a class="el" href="cacatalk_8h_source.html#l00123">video_params_s::type</a>, <a class="el" href="common__image_8c_source.html#l00132">unload_image()</a>, <a class="el" href="cacatalk_8h_source.html#l00117">video_params_s::v4l_fd</a>, <a class="el" href="cacatalk_8h_source.html#l00142">video_out_args_s::vid_params</a>, <a class="el" href="cacatalk_8h_source.html#l00141">video_out_args_s::win</a>, and <a class="el" href="cacatalk_8c_source.html#l01249">xioctl()</a>.</p>

<p>Referenced by <a class="el" href="cacatalk_8c_source.html#l00028">main()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cacatalk_8c_a8892179bee3356c0c6399983fa614ba5_cgraph.png" border="0" usemap="#cacatalk_8c_a8892179bee3356c0c6399983fa614ba5_cgraph" alt=""/></div>
<map name="cacatalk_8c_a8892179bee3356c0c6399983fa614ba5_cgraph" id="cacatalk_8c_a8892179bee3356c0c6399983fa614ba5_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa9c547c41b5d5fee785dcbb42d9685de"></a><!-- doxytag: member="cacatalk.c::set_peer_address" ref="aa9c547c41b5d5fee785dcbb42d9685de" args="(caca_canvas_t *cv, caca_display_t *dp, options *opts)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="cacatalk_8h.html#aa9c547c41b5d5fee785dcbb42d9685de">set_peer_address</a> </td>
          <td>(</td>
          <td class="paramtype">caca_canvas_t *&#160;</td>
          <td class="paramname"><em>cv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">caca_display_t *&#160;</td>
          <td class="paramname"><em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cacatalk_8h.html#a53ebf62c20f5ec338ba8eda81a032f5b">options</a> *&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets an IP address or hostname to the peer to establish connection with. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cv</td><td>A pointer to the caca canvas </td></tr>
    <tr><td class="paramname">dp</td><td>A pointer to the caca display </td></tr>
    <tr><td class="paramname">opts</td><td>The current argument options structure into which the new hostname or IP address will be saved </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l00894">894</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

<p>References <a class="el" href="cacatalk_8h_source.html#l00071">textentry::buffer</a>, <a class="el" href="cacatalk_8h_source.html#l00062">BUFFER_SIZE</a>, <a class="el" href="cacatalk_8h_source.html#l00074">textentry::changed</a>, <a class="el" href="cacatalk_8h_source.html#l00073">textentry::cursor</a>, <a class="el" href="cacatalk_8h_source.html#l00101">options_s::peer_name</a>, and <a class="el" href="cacatalk_8h_source.html#l00072">textentry::size</a>.</p>

<p>Referenced by <a class="el" href="cacatalk_8c_source.html#l00028">main()</a>.</p>

</div>
</div>
<a class="anchor" id="af94b7f7637d9f1d5d6338bdb13cdbfbb"></a><!-- doxytag: member="cacatalk.c::set_video" ref="af94b7f7637d9f1d5d6338bdb13cdbfbb" args="(video_params *vid_params, char *dev_name, Window *win, int img_width, int img_height)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="cacatalk_8h.html#af94b7f7637d9f1d5d6338bdb13cdbfbb">set_video</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cacatalk_8h.html#ae3d11b6af4cc159b10400210dcefa284">video_params</a> *&#160;</td>
          <td class="paramname"><em>vid_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dev_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cacatalk_8h.html#abe08d2c8dcdb909042427bfe5d771110">Window</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>img_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>img_height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the video device using the V4L2 driver. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vid_params</td><td>A pointer to the parameters structure for the video device to which the request will be made to. </td></tr>
    <tr><td class="paramname">dev_name</td><td>The path to the video device name (e.g. /dev/video0) </td></tr>
    <tr><td class="paramname">win</td><td>A pointer to the window parameters structure to be passed as setting video </td></tr>
    <tr><td class="paramname">img_width</td><td>The video frame width in pixels </td></tr>
    <tr><td class="paramname">img_height</td><td>The video frame heigh in pixels</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the video device file descriptor (greater than -1 if video was set/open successfully) </dd></dl>

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l00791">791</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

<p>References <a class="el" href="cacatalk_8h_source.html#l00130">video_params_s::aspect_ratio</a>, <a class="el" href="cacatalk_8h_source.html#l00119">video_params_s::buf</a>, <a class="el" href="cacatalk_8h_source.html#l00122">video_params_s::buffers</a>, <a class="el" href="cacatalk_8h_source.html#l00128">video_params_s::caca_brightness</a>, <a class="el" href="cacatalk_8h_source.html#l00129">video_params_s::caca_contrast</a>, <a class="el" href="cacatalk_8h_source.html#l00126">video_params_s::caca_dither</a>, <a class="el" href="cacatalk_8h_source.html#l00091">_window::caca_format</a>, <a class="el" href="cacatalk_8h_source.html#l00125">video_params_s::caca_format</a>, <a class="el" href="cacatalk_8h_source.html#l00127">video_params_s::caca_gamma</a>, <a class="el" href="cacatalk_8h_source.html#l00061">CLEAR</a>, <a class="el" href="cacatalk_8h_source.html#l00132">video_params_s::cv_cols</a>, <a class="el" href="cacatalk_8h_source.html#l00131">video_params_s::cv_rows</a>, <a class="el" href="cacatalk_8h_source.html#l00114">video_params_s::dev_name</a>, <a class="el" href="cacatalk_8h_source.html#l00118">video_params_s::fmt</a>, <a class="el" href="cacatalk_8h_source.html#l00116">video_params_s::img_height</a>, <a class="el" href="cacatalk_8h_source.html#l00115">video_params_s::img_width</a>, <a class="el" href="cacatalk_8h_source.html#l00112">video_params_s::is_ok</a>, <a class="el" href="cacatalk_8h_source.html#l00113">video_params_s::is_on</a>, <a class="el" href="common__image_8h_source.html#l00026">buffer::length</a>, <a class="el" href="cacatalk_8h_source.html#l00124">video_params_s::memory</a>, <a class="el" href="cacatalk_8h_source.html#l00121">video_params_s::number_of_buffers</a>, <a class="el" href="cacatalk_8h_source.html#l00120">video_params_s::req</a>, <a class="el" href="common__image_8h_source.html#l00025">buffer::start</a>, <a class="el" href="cacatalk_8c_source.html#l01207">turn_video_stream_on()</a>, <a class="el" href="cacatalk_8h_source.html#l00123">video_params_s::type</a>, <a class="el" href="cacatalk_8h_source.html#l00117">video_params_s::v4l_fd</a>, <a class="el" href="cacatalk_8h_source.html#l00089">_window::video_lines</a>, and <a class="el" href="cacatalk_8c_source.html#l01249">xioctl()</a>.</p>

<p>Referenced by <a class="el" href="cacatalk_8c_source.html#l01036">change_video_device()</a>, and <a class="el" href="cacatalk_8c_source.html#l00028">main()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cacatalk_8c_af94b7f7637d9f1d5d6338bdb13cdbfbb_cgraph.png" border="0" usemap="#cacatalk_8c_af94b7f7637d9f1d5d6338bdb13cdbfbb_cgraph" alt=""/></div>
<map name="cacatalk_8c_af94b7f7637d9f1d5d6338bdb13cdbfbb_cgraph" id="cacatalk_8c_af94b7f7637d9f1d5d6338bdb13cdbfbb_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af0452d042b6a50caa5d9b6b68fbae643"></a><!-- doxytag: member="cacatalk.c::set_window" ref="af0452d042b6a50caa5d9b6b68fbae643" args="(int fd, unsigned short video_lines, Window *win, caca_canvas_t *cv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="cacatalk_8h.html#af0452d042b6a50caa5d9b6b68fbae643">set_window</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>video_lines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cacatalk_8h.html#abe08d2c8dcdb909042427bfe5d771110">Window</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">caca_canvas_t *&#160;</td>
          <td class="paramname"><em>cv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Fills structure with current window dimensions. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>A file descriptor number related to the terminal (usually STDIN_FILENO) </td></tr>
    <tr><td class="paramname">video_lines</td><td>The number of rows (lines) used for the video area on the canvas </td></tr>
    <tr><td class="paramname">win</td><td>A pointer to our custom Window element to which information will be assigned </td></tr>
    <tr><td class="paramname">cv</td><td>A pointer to the caca canvas for which we will identify dimensions of. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l01268">1268</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

<p>References <a class="el" href="cacatalk_8h_source.html#l00091">_window::caca_format</a>, <a class="el" href="cacatalk_8h_source.html#l00088">_window::cols</a>, <a class="el" href="cacatalk_8h_source.html#l00087">_window::rows</a>, <a class="el" href="cacatalk_8h_source.html#l00090">_window::video_cols</a>, and <a class="el" href="cacatalk_8h_source.html#l00089">_window::video_lines</a>.</p>

<p>Referenced by <a class="el" href="cacatalk_8c_source.html#l00028">main()</a>.</p>

</div>
</div>
<a class="anchor" id="ad62dc32c9a10f83df0e82acc91047cf4"></a><!-- doxytag: member="cacatalk.c::turn_video_stream_off" ref="ad62dc32c9a10f83df0e82acc91047cf4" args="(video_params *vid_params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="cacatalk_8h.html#ad62dc32c9a10f83df0e82acc91047cf4">turn_video_stream_off</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cacatalk_8h.html#ae3d11b6af4cc159b10400210dcefa284">video_params</a> *&#160;</td>
          <td class="paramname"><em>vid_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attempts to turn the video stream off and sets the related indicated flag in the passed structure. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vid_params</td><td>A pointer to the parameters structure for the video device to which the request will be made to.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if the turning off streaming request was set successfully </td></tr>
    <tr><td class="paramname">-1</td><td>if the streaming request did not succeed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l01221">1221</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

<p>References <a class="el" href="cacatalk_8h_source.html#l00112">video_params_s::is_ok</a>, <a class="el" href="cacatalk_8h_source.html#l00113">video_params_s::is_on</a>, <a class="el" href="cacatalk_8h_source.html#l00123">video_params_s::type</a>, <a class="el" href="cacatalk_8h_source.html#l00117">video_params_s::v4l_fd</a>, and <a class="el" href="cacatalk_8c_source.html#l01249">xioctl()</a>.</p>

<p>Referenced by <a class="el" href="cacatalk_8c_source.html#l00419">chat()</a>, <a class="el" href="cacatalk_8c_source.html#l01235">close_video_stream()</a>, and <a class="el" href="cacatalk_8c_source.html#l00028">main()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cacatalk_8c_ad62dc32c9a10f83df0e82acc91047cf4_cgraph.png" border="0" usemap="#cacatalk_8c_ad62dc32c9a10f83df0e82acc91047cf4_cgraph" alt=""/></div>
<map name="cacatalk_8c_ad62dc32c9a10f83df0e82acc91047cf4_cgraph" id="cacatalk_8c_ad62dc32c9a10f83df0e82acc91047cf4_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3600698b52c926004b0546164aef62ca"></a><!-- doxytag: member="cacatalk.c::turn_video_stream_on" ref="a3600698b52c926004b0546164aef62ca" args="(video_params *vid_params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="cacatalk_8h.html#a3600698b52c926004b0546164aef62ca">turn_video_stream_on</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cacatalk_8h.html#ae3d11b6af4cc159b10400210dcefa284">video_params</a> *&#160;</td>
          <td class="paramname"><em>vid_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attempts to turn the video stream on and sets the related indicated flag in the passed structure. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">vid_params</td><td>A pointer to the parameters structure for the video device to which the request will be made to.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>if the streaming request was set successfully </td></tr>
    <tr><td class="paramname">0</td><td>if the streaming request did not succeed, so the stream is off. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l01207">1207</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

<p>References <a class="el" href="cacatalk_8h_source.html#l00112">video_params_s::is_ok</a>, <a class="el" href="cacatalk_8h_source.html#l00113">video_params_s::is_on</a>, <a class="el" href="cacatalk_8h_source.html#l00123">video_params_s::type</a>, <a class="el" href="cacatalk_8h_source.html#l00117">video_params_s::v4l_fd</a>, and <a class="el" href="cacatalk_8c_source.html#l01249">xioctl()</a>.</p>

<p>Referenced by <a class="el" href="cacatalk_8c_source.html#l00419">chat()</a>, and <a class="el" href="cacatalk_8c_source.html#l00791">set_video()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="cacatalk_8c_a3600698b52c926004b0546164aef62ca_cgraph.png" border="0" usemap="#cacatalk_8c_a3600698b52c926004b0546164aef62ca_cgraph" alt=""/></div>
<map name="cacatalk_8c_a3600698b52c926004b0546164aef62ca_cgraph" id="cacatalk_8c_a3600698b52c926004b0546164aef62ca_cgraph">
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a22cce36344ad43e1d0742f8af3ba7296"></a><!-- doxytag: member="cacatalk.c::xioctl" ref="a22cce36344ad43e1d0742f8af3ba7296" args="(int fd, int request, void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="cacatalk_8h.html#a22cce36344ad43e1d0742f8af3ba7296">xioctl</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>It persistently calls the v4l2_ioctl() function to program the V4L2 device. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>An open file descriptor. </td></tr>
    <tr><td class="paramname">request</td><td>The encoded request indicating how to program the device (e.g. VIDIOC_STREAMON, VIDIOC_S_FMT, etc.) Macros and defines specifying V4L2 ioctl requests are located in the videodev2.h header file </td></tr>
    <tr><td class="paramname">arg</td><td>The appropriate arguments (or pointer to a struct, e.g. v4l2_requestbuffers) related to the request at hand.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>Return values:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>request set successfully </td></tr>
    <tr><td class="paramname">-1</td><td>on error. Also, the errno variable is set appropriately </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l01249">1249</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

<p>Referenced by <a class="el" href="cacatalk_8c_source.html#l01354">send_video_thread()</a>, <a class="el" href="cacatalk_8c_source.html#l00791">set_video()</a>, <a class="el" href="cacatalk_8c_source.html#l01221">turn_video_stream_off()</a>, and <a class="el" href="cacatalk_8c_source.html#l01207">turn_video_stream_on()</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a58a896d0c5a5714ee4364a0e183f68fe"></a><!-- doxytag: member="cacatalk.c::g_video_out" ref="a58a896d0c5a5714ee4364a0e183f68fe" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cacatalk_8h.html#a47c4f91cf69c2bec7dba691fc55f5565">video_out_args</a> <a class="el" href="cacatalk_8c.html#a58a896d0c5a5714ee4364a0e183f68fe">g_video_out</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cacatalk_8c_source.html#l00026">26</a> of file <a class="el" href="cacatalk_8c_source.html">cacatalk.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Fri May 24 2013 22:20:45 for CACAtalk by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
